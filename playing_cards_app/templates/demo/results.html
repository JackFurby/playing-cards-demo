{% extends "template_parts/base.html" %}


{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
	<div class="bg-white p-3 mt-4">
		<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3">
			<h1 class="h2">Results</h1>
		</div>
		<hr/>

		<div class="row">

			<div class="row">
				<div class="col-6">
					<div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 m-sm-auto m-md-0">
						<img class="mb-3" src="{{ url_for('demo.get_image', filename=input) }}" width="100%">
					</div>
				</div>
				<div class="col-6">
					<h4>Hand rank</h4>
					<p>{{ task_out }}</p>
					<h4>Present cards</h4>
					<div class="row">
						{% for concept in concepts %}
							{% if concept[2] > 0.5 %}
								<img class="col-2 mb-3 present" alt="{{ concept[1] }}" src="{{ url_for('static', filename='playing_cards/' + concept[1] + '.png') }}" width="100%">
							{% else %}
								<img class="col-2 mb-3 not-present" alt="{{ concept[1] }}" src="{{ url_for('static', filename='playing_cards/' + concept[1] + '.png') }}" width="100%">
							{% endif %}
						{% endfor %}
					</div>
				</div>
			</div>
			<h4>Classification</h4>
			<h4>Concepts</h4>
			<form method="post" action="{{ url_for('demo.update_results') }}">
				<input type="hidden" id="model_input" value="{{ input }}" name="model_input">
				{% for concept in concepts %}
					<p>{{ concept[1] }} <span class="badge rounded-pill bg-secondary">{{ concept[2]|round(2) }}</span></p>
					<div class="row">
						<div class="col-10">
							<input type="hidden" id="{{ concept[0] }}-initial" value="{{ concept[2] }}">
							<input type="range" class="form-range" min="0" max="1" step="0.01" value="{{ concept[2] }}" id="{{ concept[0] }}" name="{{ concept[0] }}">
						</div>
						<div class="col-2">
							<button type="button" class="btn btn-secondary" disabled>Reset</button>
						</div>
					</div>
				{% endfor %}
				<button type="submit" class="btn btn-primary">Re-run concepts</button>
			</form>
			<h4>Saliency maps</h4>
			{% for concept in concepts %}
			<p>{{ concept[1] }}</p>
			<div class="col-xs-10 col-sm-10 col-md-10 col-lg-6 m-auto">
				<img class="mb-3" src="{{ url_for('demo.saliency', target=concept[0]) }}" width="100%">
			</div>
			{% endfor %}
		</div>

		<br/>
	</div>

</main>

{% endblock %}
